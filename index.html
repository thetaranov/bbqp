<!DOCTYPE html>
<html lang="ru" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bbqp | Печь и Мангал</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

    <script>
      (function() {
        // Устанавливаем таймауты
        var redirectTimeout = 5000; // 5 секунд для переадресации
        var cancelTimeout = 3000;   // 3 секунды для проверки загрузки

        // Флаг для отслеживания состояния загрузки
        window.pageLoaded = false;

        // Запускаем таймер только если пользователь зашел на основной домен
        if (window.location.hostname === 'bbqp.pro') {
          // Таймер для переадресации на запасной сайт
          window.fallbackTimer = setTimeout(function() {
            // Если таймер не был отменен, перенаправляем на запасной URL
            console.log('Основной сайт не загрузился вовремя. Перенаправление на bbqp.vercel.app...');
            window.location.href = 'https://bbqp.vercel.app';
          }, redirectTimeout);

          // Таймер для проверки загрузки через 3 секунды
          setTimeout(function() {
            if (window.pageLoaded) {
              console.log('Сайт загрузился, отмена переадресации...');
              clearTimeout(window.fallbackTimer);
              window.fallbackTimer = null;
            } else {
              console.log('Сайт еще не загрузился, продолжаем ожидание...');
            }
          }, cancelTimeout);
        }

        // Функция для отметки загрузки страницы
        window.markPageAsLoaded = function() {
          window.pageLoaded = true;
          console.log('Страница загружена, установлен флаг pageLoaded');

          // Если таймер еще активен, отменяем его
          if (window.fallbackTimer) {
            console.log('Отмена таймера переадресации...');
            clearTimeout(window.fallbackTimer);
            window.fallbackTimer = null;
          }
        };
      })();
    </script>
    <!-- КОНЕЦ СКРИПТА-РЕДИРЕКТА -->
    
    <!-- Исправлен путь с /src/index.css на index.css -->
    <link rel="stylesheet" href="index.css">
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>